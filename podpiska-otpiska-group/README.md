#### P.S. Данный readme я делаю для себя, чтобы помнить. Если у вас есть мнение по улучшению или неэффектиновсти оставьте его при себе.

Директория ``podpiska otpiska group`` имеет 7 файлов: **blacklist**  **curl-html**  **etalon-group**  **new-tg-food-baza** **sort-tg-food-baza**  **test-podpiska.py**

**Краткое описание файлов:**

1) *curl-html* - html ответ содержащий тг каналы, который нужно грепнуть, чтобы достать тг каналы. Вначале это были curl запросы к https://tgfind.org/ сейчас он недоступен, поэтому использую https://tgstat.ru/.
**P.S. Все каналы и вся информация является публичной.**
2) *new-tg-food-baza* - список тг каналов. Является результатом анализа файла curl-html.
```bash
cat curl-html | grep tgstat.ru/channel | awk -F'"' '{print $2}' | awk -F'/' '{print $5}' | grep '@' > new-tg-food-baza
```
3) *sort-tg-food-baza* - отсортированный и отфильтрованный список тг каналов. Является результатом сравнения файла *new-tg-food-baza* с *etalon-group* (на наличие повторяющихся каналов) и *blacklist* (на наличие повторяющихся каналов и тех, которые уже в blacklist). А также сортируем по наименованию и уникальности (дубликаты удаляем).
```bash
#Сортируем и удаляем дубликаты
sort new-tg-food-baza | uniq > sort-tg
#Удаляем те каналы, которые уже есть в базе
grep -v -F -f etalon-group sort-tg > sort-tg-food
#Удаляем те каналы, которые в блэклисте
grep -v -F -f blacklist sort-tg-food > sort-tg-food-baza
```
4) *etalon-group* - эталонная база тг каналов, которая добавляется в директорию ``check tg group`` в файл *etalon-group* (добавление необходимо делать в конец списка). Является результатом сравнением файла *sort-tg-food-baza* и *blacklist*, после выполнения скрипта (отбрасываем те тг каналы, в которых комментарии запрещены).
5) *blacklist* - содержит список тг каналов, у которых запрещены комментарии.
6) *test-podpiska.py* - питон скрипт с использованием телеграмм client библиотеки telethon. На вход получает файл *sort-tg-food-baza* отфильтрованную и отсортированную базу тг каналов. Проверяет доступность написания комментариев и при положительном результате подписывается на канал, при отрицательном результате добавляет тг канал в файл *blacklist*.

------

#### Run script:
```bash
python3.12 test-podpiska.py
```
